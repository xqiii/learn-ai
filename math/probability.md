# 概率与统计

## 计数

### 几何级数
设 $r$ 是一个绝对值小于 $1$ 的实数, 那么：
$$\sum_{n=0}^{\infty}r^n = 1 + r + r^2 + r^3 + \cdots = \frac{1}{r-1}$$

### 阶乘
如果 $n$ 是一个正整数，那么 $n! = n \cdot (n-1) \cdots 1 $，并且 $0! = 1$，我们把 $n!$ 解释为 $n$ 种排序方法数。

### 二项式系数
从 $n$ 中选出 $k$ 种一共有 $\frac{n!}{k!(n-k)!}$ 种方法，$n$ 和 $k$ 都是非负整数，并且 $k <= n$，称这个式子为二项式系数，记为 $\binom{n}{k}$ 。
常见等式：
$$\binom{n}{k} + \binom{n}{k+1} = \binom{n+1}{k+1}$$
$$\binom{n}{k} = \binom{n}{n-k}$$
$$k\binom{n}{k} = n\binom{n-1}{k-1}$$
$$\sum_{k=0}^{n} \binom{n}{k} = 2^n$$

### 二项式定理
任意两个数 a  和 b  之和的 n  次幂的展开公式：
$$(a + b)^n = \sum_{k=0}^{n} \binom{n}{k} a^{n-k}b^k$$

## 概率论

### 概率公理
$\Omega$ 是一个结果空间, $P$ 是一个 $\sigma$ 代数. 如果概率函数满足下列件, 那么 $(\Omega,
P ,Prob) $就是一个概率空间：

1. 如果 $A \in P$ , 那么 $Pr(A)$ 是有定义的, 并且 $0 <= Pr(A) <= 1$。
2. $Pr(∅)$ = 0 且 $Pr(Ω) = 1$。
3. 设 ${A_i}$ 是由有限个或可数个两两互不相交的集合构成的集族, 并且每一个集合都是 $P$ 中的元素. 那么 $Pr(\cup_i A_i) = \sum_{i}Pr(A_i)$。

### 条件概率
设 $B$ 是满足条件 $P(B)>0$ 的事件，那么已知 $B$ 时 $A$ 的条件概率为：
$$P(A|B) = \frac{P(A \cap B)}{P(B)}$$
可以推出：
$$P(A \cap B) = P(A|B)P(B)$$

### 贝叶斯定理
根据 $B \cap A = A \cap B$ 得到：
$$P(B \cap A) = P(B|A)P(A)$$
所以可以推出：
$$P(B|A)P(A) = P(A|B)P(B)$$
因此，只要 $P(B) \neq 0$，则：
$$P(A|B) = \frac{P(B|A)P(A)}{P(B)}$$

### 划分和全概率
样本空间 $S$ 的一个划分就是满足下列条件的可数个集合 $\{A_1,A_2 \cdots\}$。
1. 如果 $i \neq j$，那么 $A_i$ 和 $A_j$ 不相交，通常用 $A_i \cap A_j = $ 来表示这个两个集合的交集是空集。
2. 全体 $A_i$ 的并就是整个样本空间：$\cup_i A_i = S$。

全概率法则：
如果 $\{B_1,B_2 \cdots \}$ 构成了样本空间 $S$ 的一个划分，那么对任意 $A \subset S$，我们有：
$$P(A) = \sum_{n}P(A|B_n) \cdot P(B)$$

设 $\{ A_1,A_2,\cdots,A_n\}$ 是样本空间的一个划分，那么贝叶斯定理可以表示成：
$$P(A|B) = \frac{P(B|A) \cdot P(A)}{\sum_{i=1}^n P(B|A_i) \cdot P(A_i)}$$

### 离散随机变量

#### 定义
离散型随机变量 X 就是定义在一个离散的结果空间 $\Omega$(这意味
着 $\Omega$ 是有限的或至多可数的) 上的实值函数. 具体地说, 我们为每个元素 $\omega \in \Omega$
指定了一个实数 $X(\omega)$。

#### 密度函数
设 $X$ 是一个随机变量, 它定义在离散的结果
空间 $\Omega$ 上 ($\Omega$ 是有限的或至多可数的)。 那么 $X$ 的概率密度函数 (常记作 $f_X$) 就是 $X$ 取某个特定值的概率：
$$f_X(x) = P(\omega \in \Omega : X(\omega) = x)$$
也有些地方称作“概率质量函数”。


### 连续随机变量

## 定义
连续型随机变量是可以在某一区间内取任意实数值的随机现象的量。如果一个随机变量的取值不可数（无法一一列举），且可以取某个区间内的所有实数值，那么它就是连续型的。

### 概率密度函数和概率分布函数
设 $X$ 是一个随机变量. 如果
存在一个实值函数 $f_X$ 满足：
1. $f_X$ 是一个分段连续函数
2. $f_X(x) \ge 0 $
3. $\int_{-\infty}^{+\infty}f_X(t)dt = 1$

那么 $X$ 是一个连续型随机变量, $f_X$ 是 $X$ 的概率密度函数. 

$X$ 的累积分布函数$F_X(x)$ 就是 X 不大于 $x$ 的概率：
$$F_X(x) = P(X \le x) = \int_{-\infty}^{x}f_X(t)dt$$

### 期望

#### 期望值
期望值, 矩：设 $X$ 是定义在 $\mathbb{R}$ 上的随机变量, 它的概率密度函数是 $f_X$. 函数$g(X)$ 的期望值是
$$\mathbb{E}[g(X)]=\left\{\begin{array}{ll}
\int_{-\infty}^{\infty} g(x) \cdot f_{X}(x) \mathrm{d} x & \text { 若 } X \text { 是连续的 } \\
\sum_{n} g\left(x_{n}\right) \cdot f_{X}\left(x_{n}\right) & \text { 若 } X \text { 是离散的. }
\end{array}\right.$$

最重要的情形是 $g(x) = x^r$
。我们把 $E[Xr]$ 称为 $X$ 的 $r$ 阶矩, 把 $E[(X −E[X])^r]$ 称为 $X$ 的 $r$ 阶中心矩。

#### 均值
$X$ 的均值 (即平均值或期望值) 是一阶矩. 我们把它表示为 $E[X]$ 或 $µ_X$
(当随机变量很明确时, 通常不给出下标 $X$, 而只写 $µ$)。具体地说：
$$\mu =\left\{\begin{array}{ll}
\int_{-\infty}^{\infty} x \cdot f_{X}(x) \mathrm{d} x & \text { 若 } X \text { 是连续的 } \\
\sum_{n} x_n  \cdot f_{X}(x_{n}) & \text { 若 } X \text { 是离散的 }
\end{array}\right.$$

#### 方差
方差 (记作 $\sigma_X^2$ 或 $Var(X)$) 是二阶中心距, 也可以说是 $g(X) =
(X − µX)^2$ 的期望值。同样, 当随机变量很明确时, 通常不给出下标 $X$,而只写 $\sigma^2$。 把它完整地写出来, 就是：
$$\sigma_X^2=\left\{\begin{array}{ll}
\int_{-\infty}^{\infty} (x-\mu x)^2 f_X(x) \mathrm{d} x & \text { 若 } X \text { 是连续的 } \\
\sum_{n} (x-\mu x)^2 f_{X}\left(x_{n}\right) & \text { 若 } X \text { 是离散的 }
\end{array}\right.
$$
因为 $\mu_X = \mathbb{E}[X]$，所以在一系列代数运算后，有：
$$\sigma^2 = \mathbb{E}[(X - \mathbb{E}[X])^2] = \mathbb{E}[X^2] - \mathbb{E}[X]^2$$
标准差是方差的平方根，即：$\sigma = \sqrt{\sigma_X^2}$

### 协方差
对于任意两个 (离散型或连续型的) 随机变量 $X$ 和 $Y$ , 如果它们的均值分别是
$\mu X$ 和 $\mu Y$ , 那么 $X$ 和 $Y$ 的协方差可以写成：
$$Cov(X,Y) = E[XY] - \mu_X \mu_Y$$

### 概率分布

#### 伯努利分布
如果随机变量 $X$ 满足 $P(X = 1) = p$ 且 $P(X = 0) = 1 − p$,
那么 $X$ 就服从参数为 $p \in [0, 1]$ 的伯努利分布. 我们把结果 $1$ 看作成功, 把结果 $0$ 看作失败, 并记 $X ∼ Bern(p)$. $X$ 也可以称为二元标示随机变量。均值 $\mu_X$ 等于 $p$, 方差 $\sigma_X^2$ 等于 $p(1-p)$。

#### 二项分布
设 $n$ 是一个正整数，并设 $p \in [0,1]$，如果随机变量满足：
$$
P(X = k) = \begin{cases} 
\binom{n}{k} p^k (1-p)^k & 若 k \in \{0,1,\cdots,n\} \\
0 & 其他 
\end{cases}
$$
那么 $X$ 就服从参数为 $n$ 和 $p$ 的二项分布, 并记 $X ∼ Bin(n, p)$。 $X$ 的均值是 $np$，方差是 $np(1 − p)$。

#### 正态分布
如果随机变量 X 的概率密度函数是：
$$f(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{-\frac{(x-\mu)^2}{2\sigma^2}}, \quad x \in \mathbb{R}$$
那么 $X$ 就服从均值为 $\mu$ 且方差为 $\sigma^2$ 的正态分布, 并记作 $X ∼ N(µ, \sigma^2)$。 这个概率密度函数非常重要, 也说 $X$ 服从高斯分布(均值为 $\mu$, 方差为 $\sigma^2$)。 如果 $X$ 服从标准正态分布, 那么 $X ∼ N(0, 1)$。 如果 $X$ 服从正态分布, 有时也说 $X$ 遵循
钟形曲线。

### 极限定理

#### 大数定理
设 $X1, X2, \cdots$ 是独立同分布的随机变量, 且均值为 $\mu$, 并设 $\bar X_n = \frac{X_1+\cdots+X_n}{n}$，那么 $\bar X_n \overset{a.s.}{\rightarrow} \mu$。


#### 中心极限定理
设 $X_1, X_2, ..., X_n$ 是独立同分布的随机变量，均值为 $\mu$ ，方差为 $\sigma^2$。当 $n \to \infty$  时：
$X_1, X_2, \dots, X_n$
$$\frac{\bar{X} - \mu}{\sigma/\sqrt{n}} \xrightarrow{d} N(0,1)$$
当样本量足够大时，样本均值收敛于期望

## 统计

### 假设检验

通过样本证据来验证关于总体参数的猜测是否成立。
1. 两种假设
原假设 $(H_0)$ ：默认成立的假设，通常表示"无效应"或"无差异"（如：新药无效、两组均值相等）
备择假设 $(H_1)$ 或 $(Ha)$：研究者想要证明的假设，与原假设互斥（如：新药有效、两组均值不等）
2. 检验逻辑
采用"反证法"思路：先假设 $(H_0)$ 成立，然后计算在这种假设下观察到当前样本（或更极端情况）的概率。如果这个概率很小，就拒绝$H_0$。

步骤：
1. 建立假设：明确 $(H_0)$ 和 $(H_1)$
​
2. 选择检验统计量：如t统计量、z统计量、卡方统计量等

3. 确定显著性水平 $(\alpha)$ ：通常取0.05或0.01，表示"小概率"的阈值

4. 计算p值：在原假设成立时，得到当前样本结果或更极端结果的概率
做出决策：
- 若 $p \le \alpha$ ，拒绝 $H_0$（结果统计显著）
- 若 $p \ge \alpha$ ，不拒绝 $H_0$ （证据不足）

### t值检验
$$t = \frac{\bar{X} - \mu_0}{s/\sqrt{n}}$$

- $\bar{X}$ ：样本均值（你实际测到的平均值）
- $\mu_0$：假设的总体均值（你想要检验的那个"标准值"）
- $s$：样本标准差（数据分散程度）
- $n$：样本量

| 步骤       | 核心任务          | 关键产出     |
| -------- | ------------- | -------- |
| 1. 建立假设  | 明确$H_0$和$H_1$ | 研究假设书面化  |
| 2. 选择检验  | 确定单/双/配对      | 检验类型确定   |
| 3. 检查前提  | 正态性、方差齐性      | 前提检验通过   |
| 4. 计算t值  | 套用公式或软件       | t统计量     |
| 5. 确定显著性 | 查表或得p值        | p值与临界值比较 |
| 6. 统计决策  | 拒绝/不拒绝$H_0$   | 显著性结论    |
| 7. 解释结果  | 计算效应量         | 实际意义评估   |

### 自由度

在已知某些约束条件下，还能自由变化的数据个数。

| 检验类型                    | 自由度公式                   | 示例                |
| ----------------------- | ----------------------- | ----------------- |
| **单样本 t**               | $df = n - 1$            | 20人测智商，df=19      |
| **独立样本 t**<br>（等方差）     | $df = n_1 + n_2 - 2$    | A组15人+B组20人，df=33 |
| **配对样本 t**              | $df = n - 1$<br>（n是对子数） | 30对夫妻，df=29       |
| **Welch校正 t**<br>（不等方差） | 复杂近似公式                  | 软件自动计算，通常不是整数     |

### P值

在假设原假设为真的情况下，观察到当前或更极端结果的概率

$$p = P(\text{观察到的数据} \mid H_0 \text{为真})$$

